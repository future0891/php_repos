<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>Document</title>
</head>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/ztree/css/zTreeStyle/zTreeStyle.css" />
<link type="text/css" rel="stylesheet" href="__PUBLIC__/jquery-ui/themes/base/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/ztree/css/zTreeStyle/zTreeStyle.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/easyui/themes/icon.css">
<script type="text/javascript" src="__PUBLIC__/Js/jquery.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/ztree/js/jquery.ztree.core-3.5.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/jquery-ui/ui/jquery.ui.core.js"></script>
<script type="text/javascript" src="__PUBLIC__/jquery-ui/ui/jquery.ui.widget.js"></script>
<script type="text/javascript" src="__PUBLIC__/jquery-ui/ui/jquery.ui.mouse.js"></script>
<script type="text/javascript" src="__PUBLIC__/jquery-ui/ui/jquery.ui.sortable.js"></script>
<script type="text/javascript" src="__PUBLIC__/easyui/easyloader.js"></script>
<script type="text/javascript" src="__PUBLIC__/Js/admin.js"></script>
<script type="text/javascript">
    $(function() {
        easyloader.theme = "bootstrap";
        // var _isSort =false;
        
        $(".listTable").shopsort({url:"__URL__/productSort"});
        // $( "tbody" ).sortable({
                // placeholder: "ui-state-highlight",
                // axis:"y",
                // cursor: "move",
                // helper:function(e ,element) {
                    // var _original = element.children();
                    // var _helper = element.clone();
                    // _helper.children().each(function(index) {
                        // $(this).width(_original.eq(index).width());
                    // });
                    // return _helper;
                // },
                // update:function(e , ui) {
                    // setOrder();
                // }
            // });
        // $( "tbody" ).sortable("disable");
//         
        // $("#startSort").click(function() {
            // if(!_isSort) {
                // $( "tbody" ).sortable("enable");   
                // $(this).linkbutton({disabled:true});
                // $("#stopSort").linkbutton({disabled:false});
                // $(".listTable thead tr").append("<td>顺序</td>");
                // setOrder();
                // $(".listTable tfoot tr").append("<td>拖动行开始排序</td>");
                // _isSort  = true;
                // } else {
                    // return false;
                // }
        // });
//         
        // $("#stopSort").click(function(){
            // if (_isSort) {
                // var id_Arr = $( "tbody" ).sortable("toArray");
                // $(this).linkbutton({disabled:true});
                // $( "tbody" ).sortable("disable");
                // $("#startSort").linkbutton({disabled:false});
                // $(".listTable").find("tr").each(function(index){
                    // $(this).children().last().remove();
                // });
//                 
                // $.post("__URL__/productSort", {"sort":id_Arr},function(data){
                    // alert(data);
                // });
                // _isSort = false;
            // } else {
                // return false;
            // }
//             
        // });
//         
        // function setOrder() {
            // $(".listTable tbody tr").each(function(index){
                // if(_isSort) {
                    // $(this).find("td:last").html((index+1));
                // } else {
                    // $(this).append("<td>"+(index+1)+"</td>");
                // }
//                 
            // });
        // }
                
        var zNodes = {$channel};
        $("#tree").shoptree({nodes:zNodes ,showChannel:true ,redirect:false , url:"www.baidu.com"}).expandAll(true);
        $("#channel").click(showMenu );
    })
    
</script>

<style type="text/css">
table {
    margin-top:15px;
    margin-left:30px;
    font-size:12px;
    border-top:1px solid #999;
    border-left:1px solid #999;
    padding:0px;
}


table tr td {
    padding:6px;
    padding-right:0px;
    border-right:1px solid #999;
    border-bottom:1px solid #999;

}

table thead td{
    background:#336d9b;
    color:#fff;
    margin:0px;
}    
.oddClm {
    background-color: #5FC6DA;
}
</style>          

<body>
    
 <label>商品种类:</label><input type="text"  id="channel" /><br/>   
     <div id="menuContent" class="menuContent" style="display:none; position: absolute;background-color: #5FC6DA">
        <ul id="tree" class="ztree" style="margin-top:0; width:160px;"></ul>
    </div>
	<table width="580" cellspacing="0" cellPadding="0" class="listTable">
		<thead>
			<tr>
				<td>id</td>
				<td>图片</td>
				<td>库存</td>
			</tr>
		</thead>
		<tbody>
			<volist id = "p" name="product">
			    <tr id="{$p.id}">
			    	<td>{$p.id}</td>
			    	<td>{$p.name}</td>
			    	<td>{$p.inventory}</td>
			    </tr>
			</volist>
			<empty name="product">
			    <tr>
			    	<td colspan="3">没有数据</td>
			    </tr>
			</empty>
		</tbody>
		<tfoot>
		    <tr>
		        <td colspan="3"><a href="#" id="startSort" class="easyui-linkbutton"  data-options="iconCls:'icon-ok'">开始排序</a>&nbsp;<a href="#" class="easyui-linkbutton"  data-options="iconCls:'icon-save',disabled:true" id="stopSort">结束保存</a>&nbsp;</td>
		    </tr>
		</tfoot>
	</table>
	
</body>
</html>